# 뒤로가기/목록으로 버튼 UX 개선 분석 (v3)

## 1. 현황 및 문제점

현재 애플리케이션 내 '뒤로가기', '목록으로' 등의 탐색 버튼이 아래와 같이 여러 방식으로 구현되어 일관성이 부족하고 사용자에게 혼란을 줄 수 있습니다.
템플릿에 뒤로가기, 목록으로 버튼. 이거 실제 실무에서도 쓰는지. 어떻게 쓰는지 점검하고 뺄 건 빼거나 수정할 건 수정해서 ux 개선하기

- **동작 방식의 비일관성**: `history.back()`과 명시적 `<a href="...">` 링크가 혼용됨.
- **위치의 비일관성**: 페이지마다 버튼이 왼쪽 상단, 하단 중앙 등 다른 위치에 존재함.
- **존재 여부의 비일관성**: 버튼이 필요한 페이지에 없거나, 필요 없는 페이지에 있는 경우가 있음.
- **디자인/텍스트의 비일관성**: '공구로 돌아가기', '뒤로가기', '목록으로' 등 명칭이 통일되지 않음.

이러한 비일관성은 사용자의 인지적 부담을 가중시키고 사이트의 전체적인 사용성을 저해하는 주요 원인입니다.

## 2. 개선 목표 및 핵심 가이드라인

**목표**: 사용자가 사이트의 어떤 페이지에 있더라도 다음에 어디로 가야 할지 쉽게 예측하고, 일관된 경험을 통해 편안하게 사이트를 탐색할 수 있도록 한다.

- **가이드라인 1 (동작)**: `history.back()`을 사용하지 않고, **명시적 링크(Default)와 동적 `redirectUrl`(Enhancement)을 조합**하여 예측 가능하고 스마트한 탐색을 제공한다.
- **가이드라인 2 (위치)**: 모든 탐색 버튼의 위치는 **콘텐츠 영역의 '왼쪽 상단'**으로 통일하여 사용자의 시선 흐름과 학습 용이성을 극대화한다.
- **가이드라인 3 (존재 여부)**: **"자식 페이지에는 반드시 배치하고, 최상위 페이지에는 배치하지 않는다"**는 규칙을 수립하여 일관성을 확보한다.
- **가이드라인 4 (디자인)**: 버튼의 아이콘과 텍스트를 통일하여 시각적 일관성을 유지한다.

---

## 3. 위치 및 존재의 일관성 확립

### 3.1. 버튼 위치 통일: 콘텐츠 영역의 '왼쪽 상단'

- **이유**:
    - **사용자 시선 흐름**: 사용자는 페이지를 탐색할 때 시선이 가장 먼저 머무는 왼쪽 상단에서 자연스럽게 버튼을 발견할 수 있다.
    - **관습적인 디자인 패턴**: 브라우저의 뒤로가기 버튼처럼, UI에서 '상위 메뉴로' 이동 기능은 왼쪽에 두는 것이 가장 익숙하다.
    - **계층 구조 시각화**: 페이지 제목 근처에 '← 목록으로' 버튼이 있으면, 현재 페이지의 소속(계층)을 시각적으로 쉽게 인지할 수 있다.
- **실행 방안**: 모든 '이전/목록으로' 유형의 버튼은 콘텐츠 영역의 시작 부분(예: `<h1>` 태그 이전)에 위치하도록 HTML 구조를 통일한다.

### 3.2. 버튼 존재 여부 결정: 계층 구조 기반 규칙

일관성을 위해 아래의 규칙에 따라 버튼을 배치하거나 제거합니다.

- **버튼이 필요한 페이지 (자식 페이지)**
    - 상세 페이지 (`/recipes/{id}`)
    - 수정/생성 페이지 (`/recipes/{id}/edit`)
    - 마이페이지의 하위 페이지 (`/users/me/bookmarks`)
    - 즉, **논리적인 상위(부모) 페이지가 명확하게 존재하는 모든 페이지**
- **버튼이 필요 없는 페이지 (최상위 페이지)**
    - **홈페이지 (`/`)**: 사이트의 시작점.
    - **최상위 목록 페이지 (`/recipes/list`, `/group-purchases/list`)**: 각 도메인의 최상위 레벨.
    - **로그인, 회원가입 페이지**: 주 목적이 작업 완료인 페이지.

### 3.3. 구현 고찰: 왜 `base.html`에 넣으면 안되는가?

- **결론**: `base.html`에 공통으로 버튼을 통합하는 것은 **적절하지 않습니다.**
- **이유 1. 불필요한 노출**: 홈페이지, 최상위 목록 등 버튼이 필요 없는 페이지에도 버튼이 강제로 표시되어 혼란을 야기합니다.
- **이유 2. 동적 속성 처리의 복잡성**: 버튼의 `href`와 `텍스트`는 페이지의 컨텍스트에 따라 동적으로 변해야 합니다. `base.html`은 개별 페이지의 컨텍스트를 알 수 없어 이를 처리하는 로직을 만들기가 매우 복잡하고 비효율적입니다.
- **권장 구현**: Thymeleaf의 **재사용 가능한 조각(fragment)**으로 만들어 필요한 템플릿에서만 호출하여 관리합니다.

---

## 4. 동작 방식 구현 전략 (Thymeleaf 기준)

### 4.1. 단계 1: Controller → Template 으로 `redirectUrl` 전달

목록/검색 페이지에서 상세 페이지로 이동하는 링크에, 현재 페이지의 전체 URI(쿼리 파라미터 포함)를 `redirectUrl`로 전달합니다.

```html
<a th:href="@{/group-purchases/{id}(id=${item.id}, redirectUrl=${#httpServletRequest.getRequestURI() + '?' + #httpServletRequest.getQueryString()})}">
    상세보기
</a>

```

### 4.2. 단계 2: Template 에서 `redirectUrl` 우선 사용

상세 페이지의 버튼은 `redirectUrl` 파라미터의 존재 여부에 따라 동적으로 링크와 텍스트를 생성합니다.

```html
<!-- 콘텐츠 상단에 위치 -->
<div class="mb-3">
    <a th:href="${param.redirectUrl ?: '/group-purchases/list'}" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left"></i>
        <span th:text="${param.redirectUrl} ? '이전으로' : '목록으로'"></span>
    </a>
</div>

```

### 4.3. 단계 3: Controller 작업 후 `redirectUrl` 사용

C/U/D 작업 후에는 전달받은 `redirectUrl`로 리다이렉트하여 사용자 컨텍스트를 유지합니다. (현 `GroupBuyController`에 잘 구현됨)

```java
if (redirectUrl != null && !redirectUrl.isBlank()) {
    return "redirect:" + redirectUrl;
}
return "redirect:/group-purchases/" + purchaseId;

```

## 5. 최종 결론

애플리케이션의 탐색 경험을 향상시키기 위해, **동작, 위치, 존재, 디자인** 네 가지 측면에서 아래와 같이 일관성을 확립할 것을 제안합니다.

1. **동작**: `history.back()`을 모두 제거하고, **'명시적 링크 + `redirectUrl` 조합'** 전략을 전역적으로 적용한다.
2. **위치**: 모든 탐색 버튼은 **콘텐츠 영역의 '왼쪽 상단'**으로 위치를 통일한다.
3. **존재**: **'자식 페이지에만 배치, 최상위 페이지에는 미배치'** 규칙을 일관되게 적용한다.
4. **구현**: `base.html`이 아닌 재사용 fragment 방식으로 구현한다.

- 왜냐면 같은 페이지를 여러 엔드포인트에서 접근해서 쓰다보니까. ux/ui 관점에서 점검해야겠어.
- 근데 버튼 빼면 브라우저의 뒤로가기나 다른 걸 클릭해서 써야하는데. 현재 서버사이드방식이라 뒤로가기 누르면 한 페이지 안에서 쿼리파라미터로 구현된 여러 탭들 왔다갔다하다가 뒤로가기 누르면. 그 전페이지가 계속 탭 왔다갔다한 거라서 계쏙눌러야지 예로 마이페이지(첫 시작)으로 오긴 함.

---

http://localhost:8080/group-purchases/1/participants 에

<a href="/group-purchases/1" class="btn btn-outline-secondary">
<i class="bi bi-arrow-left"></i> 공구로 돌아가기
</a>

---

http://localhost:8080/recipes/meal-53079 에

<div class="mb-3">
<button onclick="history.back()" class="btn btn-outline-secondary">
<i class="bi bi-arrow-left"></i> 뒤로가기
</button>
</div>

---

http://localhost:8080/group-purchases/1 에

<div class="mb-3">
<a href="/group-purchases/list" class="btn btn-outline-secondary">
<i class="bi bi-arrow-left"></i> 목록으로
</a>
</div>

---

http://localhost:8080/community-posts/1 에

<div class="mb-3">
<a href="/community-posts/list" class="btn btn-outline-secondary">
<i class="bi bi-arrow-left"></i> 목록으로
</a>
</div>

---

http://localhost:8080/admin/corrections 에

<a href="/admin" class="btn btn-outline-secondary">
<i class="bi bi-arrow-left"></i> 관리자 대시보드
</a>

---

http://localhost:8080/admin/reports 에

<a href="/admin" class="btn btn-outline-secondary">
<i class="bi bi-arrow-left"></i> 관리자 대시보드
</a>

---

http://localhost:8080/users/me/bookmarks?tab=groupbuy 애

<div class="mt-4 text-center">
<a href="/users/me" class="btn btn-outline-secondary">
<i class="bi bi-arrow-left"></i> 마이페이지로 돌아가기
</a>
</div>