# RecipeMate Backlog

> 미구현 기능, 기술 부채, 개선 사항 기록 및 우선순위별 관리

📝 원칙
- **TDD**: 백로그 항목도 테스트 먼저 작성
- **YAGNI**: 필요하지 않으면 구현하지 않기 (과도한 추상화 방지)
- **지속적 리팩터링**: 코드 냄새 느껴질 때 백로그 항목 처리

---

## 🔴 HIGH Priority (즉시 수정)

- 레시피도 themealdb, 식품안전나라, 사용자 추가 이렇게 세 분류로 하고. 각각 레시피 목록 볼 수 있고. 각각 카테고리나 키워드나 재료나 필터링이나 그런 기능 추가해야 할 듯. 그럴려면 db에 api 정보 넣고 해야할 거 같은데 맞나?
    - 식품안전나라 API, MealDB API를 매번 실시간 호출
    - prod 환경에서만 Redis 캐싱 적용
- **문제점**:
    - API 호출 제한(rate limit) 리스크
    - 응답 속도가 외부 API에 의존적
    - 검색 기능 제약 (외부 API 검색 기능에만 의존)
- **개선 방안**:
    1. **DB 캐싱 전략**: 첫 호출 시 레시피 데이터를 자체 DB에 저장
    2. **배치 업데이트**: 주기적으로 인기 레시피/최신 데이터 동기화
    3. **하이브리드 접근**: 기본 검색은 자체 DB, 상세 정보는 API 재호출
    4. **TTL 관리**: 데이터 신선도 유지 (예: 7일마다 갱신)
- **장점**:
    - 응답 속도 개선
    - API 호출 횟수 감소 (비용/제한 대응)
    - 자체 검색 기능 고도화 가능
    - 서비스 안정성 향상

---

## 🟡 MEDIUM Priority

### 1. 게시글 좋아요/댓글 기능
  1. Post 엔티티에 좋아요/댓글 수 필드 추가 또는 동적 계산
  2. 댓글(Comment) 엔티티와 관계 설정
  3. 좋아요(Like) 엔티티 생성 및 중복 방지 로직
  4. PostResponse DTO에 commentCount, likeCount 필드 추가
  5. UI 복원 (community-posts/list.html, detail.html, search/results.html)

---

## 🟢 LOW Priority 

- **레시피 기반 공구 생성**: 기획의 핵심인 '원클릭 공구 생성' 기능이 일부 구현되었으나(`GroupBuyController`의 `/new` 엔드포인트), 재료 목록을 JSON 문자열로 수동 파싱하는 등(`createRecipeBasedGroupBuy` 메서드) 다소 복잡하고 불안정한 방식에 의존하고 있습니다. 프론트엔드와 상호작용이 매끄럽지 않을 수 있습니다.
-[] 게시글 수정 되는데, 기존 제목과 바디 내용은 그대로 유지되는데 카테고리는 안되네. 점검 좀.
-[] 게시글 조회수. 새로고침할 때마다 계속 증가하는데 세션 기반으로 중복 카운트 방지 기능 추가 필요.
-[] 공동구매 상세 페이지/커뮤니티포스트 상세 페이지 속 댓글 등록은 되는데. 수정/삭제/대댓글 달 때 오류. 로그 확인하고 해결 필요
- [x] 로컬에서 실행할 때 미리 어드민 계정되도록
  - 구현 완료: `AdminUserInitializer` 클래스 생성
  - 로컬 환경(dev 프로파일)에서만 실행
  - 어드민 계정: admin@recipemate.com / admin123
- [x] 로그인 에러나 공동구매에서 "마감일은 현재보다 이후여야 합니다" 에러 뜨면서 새로고침되는데 기존에 작성하던 내용은 그대로 유지되게.
- [] 검증 로직이나 권한 체크는 따로 permissionChecker나 ValidationUtil 같은 걸로 모아서 재사용하는 게 나을 거 같은데 어떻게 생각해?

### 1. htmx HTML Fragment 엔드포인트 구현
- **개선**: 
  1. 컨트롤러에 htmx HTML Fragment 엔드포인트 추가 (TODO 주석으로 표시된 부분 구현)
  2. Thymeleaf Fragment 템플릿 생성 (list-items, detail-content, form-fields 등)
  3. 기존 템플릿의 htmx 호출 경로를 HTML Fragment 엔드포인트로 변경
- **장점**: 
  - htmx 철학 완전 준수 (서버가 HTML 반환)
  - JSON 파싱 오버헤드 제거
  - 서버 사이드 렌더링 완전 활용
- **참고**: 기존 기능에 영향 없이 점진적 추가 가능
- **htmx 부분 페이지 갱신**: `URL_DESIGN.md`와 컨트롤러 곳곳에 `htmx`를 위한 `/fragments` 엔드포인트가 설계되어 있으나, 실제 구현은 대부분 일반적인 `redirect` 방식으로 처리되고 있습니다. 이로 인해 사용자 경험(UX)이 저하될 수 있습니다.

### 2. DTO Validation 강화
- 현재 기본 어노테이션만 사용 (@NotBlank, @Email, @Pattern)
- 개선: 커스텀 Validation 어노테이션 (예: @UniqueEmail)
- 장점: DTO에 검증 로직 응집
- 단점: 구현 복잡도 증가
- 처리 시점: 검증 로직 복잡해지고 재사용 많을 때
- 예상 시간: 3-4시간





